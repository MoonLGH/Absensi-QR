{"mappings":"AAAA,IAAIA,IAAM,qCAEV,SAASC,SACQC,SAASC,eAAe,cAC9BC,UAAUC,OAAO,SAC5B,CAEAC,eAAeC,MACX,IAAIC,EAAQN,SAASC,eAAe,SAASM,MAEzCC,QAAYC,MAAMX,IAAM,qBAAsB,CAC9CY,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAER,YAKP,aAFHE,EAAIO,QAEZC,QACLC,QAAQZ,IAAI,WACZa,aAAaC,QAAQ,QAASb,GAC9Bc,MAAM,wCACNpB,SAASqB,cAAc,SAASC,WAAa,uFAI7CL,QAAQZ,IAAI,eACZe,MAAM,mCAEd,CAEA,SAASG,MACLL,aAAaM,QACbJ,MAAM,uBACV,CAMAhB,eAAeqB,WACXR,QAAQZ,IAAI,gBACZ,IAAIG,QAAYC,MAAMX,IAAM,iBACxB4B,QAAalB,EAAIO,OACrB,GAAoB,MAAhBW,EAAKV,OAAgB,CACrB,IAAIW,EAAQ3B,SAASC,eAAe,eAChC2B,EAAO,GACPb,EAAOW,EAAKG,QACZC,EAAc,GAClB,IAAK,IAAIC,EAAI,EAAGA,EAAIhB,EAAKiB,OAAQD,IAAK,CAClC,IAAIE,EAASlB,EAAKgB,GAAGG,MAAM,GAC3B,IAAK,IAAIC,EAAI,EAAGA,EAAIpB,EAAKgB,GAAGG,MAAMF,OAAQG,IAClCF,EAASlB,EAAKgB,GAAGG,MAAMC,KACvBF,EAASlB,EAAKgB,GAAGG,MAAMC,IAG/BL,EAAYM,KAAK,CACbC,KAAMtB,EAAKgB,GAAGM,KACdC,MAAOvB,EAAKgB,GAAGO,MACfC,KAAMN,GAEd,CAEAH,EAAYU,MAAK,CAACC,EAAGC,IACVA,EAAEH,KAAOE,EAAEF,OAGtBtB,QAAQZ,IAAIyB,GACZ,IAAK,IAAIa,EAAI,EAAGA,EAAIb,EAAYE,OAAQW,IACpCf,GAAQ,2FAGgBE,EAAYa,GAAGN,gDACfP,EAAYa,GAAGL,iDACf,IAAKM,KAAKd,EAAYa,GAAGJ,MAAOM,mEAK5D5B,QAAQZ,IAAIuB,GACZD,EAAML,WAAaM,EACnBD,EAAMzB,UAAU4C,IAAI,aACxB,CACJ,CAEA1C,eAAe2C,SAASC,GAEpB,IADmBC,QAAQ,eACT,OAClB,IAAIC,EAAKF,EAAEG,aAAa,WAEpB7C,EAAQY,aAAakC,QAAQ,SAC7B5C,QAAYC,MAAMX,IAAM,kBAAmB,CAC3CY,OAAQ,SACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAER,QAAM4C,SAG7BxB,QAAalB,EAAIO,OACF,MAAhBW,EAAKV,QACJI,MAAMM,EAAKG,SACX7B,SAASqD,SAASC,UAElBlC,MAAMM,EAAKG,QAGnB,CArEI7B,SAASqB,cAAc,kBACvBJ,QAAQZ,IAAI,WACZoB,YAqEDzB,SAASC,eAAe,UACvBD,SAASC,eAAe,SAASsD,aAAa,OAAOzD,IAAI","sources":["src/assets/js/absen.js"],"sourcesContent":["let api = \"https://absensi-api-qr.vercel.app/\"\n\nfunction getNav() {\n    let navbar = document.getElementById(\"navbar-cta\");\n    navbar.classList.toggle(\"hidden\");\n}\n\nasync function log() {\n    let token = document.getElementById(\"token\").value\n\n    let res = await fetch(api + \"api/checkAuthority\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token }),\n    });\n\n    let json = await res.json()\n\n    if (json.status === 200) {\n        console.log(\"correct\")\n        localStorage.setItem(\"token\", token)\n        alert(\"Authorized, please click on continue\")\n        document.querySelector(\"#main\").innerHTML += `\n        <a href=\"./manageAbsen.html\" class=\"btn btn-wide\">Continue</a>\n        `\n    } else {\n        console.log(\"not correct\")\n        alert(\"Error Unauthorized Access Token\")\n    }\n}\n\nfunction out() {\n    localStorage.clear()\n    alert(\"Access Token Cleared\")\n}\n\nif (document.querySelector(\"#absen-table\")) {\n    console.log(\"Loading\")\n    loadData()\n}\nasync function loadData() {\n    console.log(\"Loading Data\")\n    let res = await fetch(api + \"api/showabsen\");\n    let data = await res.json();\n    if (data.status === 200) {\n        let table = document.getElementById(\"absen-table\");\n        let rows = \"\";\n        let json = data.message\n        let latestAbsen = []\n        for (let i = 0; i < json.length; i++) {\n            let latest = json[i].absen[0]\n            for (let j = 0; j < json[i].absen.length; j++) {\n                if (latest < json[i].absen[j]) {\n                    latest = json[i].absen[j]\n                }\n            }\n            latestAbsen.push({\n                nama: json[i].nama,\n                kelas: json[i].kelas,\n                time: latest\n            })\n        }\n        // sort the array based on the latest time\n        latestAbsen.sort((a, b) => {\n            return b.time - a.time\n        })\n\n        console.log(latestAbsen)\n        for (let i = 0; i < latestAbsen.length; i++) {\n            rows += `\n            <tbody>\n        <tr class=\"bg-white\">\n            <td class=\"px-4 py-2\">${latestAbsen[i].nama}</td>\n            <td class=\"px-4 py-2\">${latestAbsen[i].kelas}</td>\n            <td class=\"px-4 py-2\">${(new Date(latestAbsen[i].time)).toLocaleString()}</td>\n        </tr>\n        </tbody>\n        `;\n        }\n        console.log(rows)\n        table.innerHTML += rows;\n        table.classList.add(\"table-auto\")\n    }\n}\n\nasync function deleteId(e){\n    let confirmation = confirm(\"Yakin kah ?\")\n    if(!confirmation) return\n    let id = e.getAttribute(\"data-id\")\n\n    let token = localStorage.getItem(\"token\")\n    let res = await fetch(api + \"api/deleteAbsen\", {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token,id }),\n    });\n\n    let data = await res.json()\n    if(data.status === 200) {\n        alert(data.message)\n        document.location.reload()\n    } else {\n        alert(data.message)\n    }\n\n}\n\nif(document.getElementById(\"excel\")){\n    document.getElementById(\"excel\").setAttribute(\"href\",api+\"api/export\")\n}"],"names":["api","getNav","document","getElementById","classList","toggle","async","log","token","value","res","fetch","method","headers","body","JSON","stringify","json","status","console","localStorage","setItem","alert","querySelector","innerHTML","out","clear","loadData","data","table","rows","message","latestAbsen","i","length","latest","absen","j","push","nama","kelas","time","sort","a","b","i1","Date","toLocaleString","add","deleteId","e","confirm","id","getAttribute","getItem","location","reload","setAttribute"],"version":3,"file":"login.91a9eb6c.js.map"}